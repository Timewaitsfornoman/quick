!function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var p="function"==typeof require&&require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){var i=t("../../../../unit/libs/lib-backtop/1.0.0/backtop"),o=t("../../../../unit/libs/lib-template/1.0.0/template"),r=null,a=($(".J_ditu"),$("#J_item").html()),s=($(".J_navbar"),$(".J_imgview")),p=$(".J_popview"),c=$(".J_content"),u=$(".J_viewwapper"),l=$(window).width(),f={init:function(){var t=this,e=t.dataModel();t.renderHtml(e),$(".J_footer").removeClass("hidden"),i()},issupportWebp:function(){var t="?imageMogr2/auto-orient",e="?imageMogr2/auto-orient/format/webp",n=function(){try{return 0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(t){return!1}}()?e:t;return n},dataModel:function(){var t=this.issupportWebp(),e=[{title:"景点",describe:"“深深的雨巷依依的楼，曲曲的廊棚扁扁的舟，舟行廊下牵动江枫的渔火，楼入巷中吟唱吴越的棹歌。”西塘的美游客说了算，一起来看看游人镜头里的西塘最美地标！",imagearray:["http://upp.tujiamedia.com/xitang/02.jpg"+t,"http://upp.tujiamedia.com/xitang/03.jpg"+t,"http://upp.tujiamedia.com/xitang/04.jpg"+t,"http://upp.tujiamedia.com/xitang/05.jpg"+t]},{title:"住宿",describe:"找一家临水客栈，或推开窗凭栏而眺，或坐在临水院落的躺椅上沏杯茶，听收音机里传来的婉转的江南小调，静静享受古镇的慢时光。你会发现，西塘如此鲜活。",imagearray:["http://upp.tujiamedia.com/xitang/06.jpg"+t,"http://upp.tujiamedia.com/xitang/07.jpg"+t,"http://upp.tujiamedia.com/xitang/08.jpg"+t,"http://upp.tujiamedia.com/xitang/09.jpg"+t]},{title:"美食",describe:"千年的农耕文明和西塘人淡泊的处世习性，造就了当地朴实的饮食文化。西塘除了有必点的特色菜肴，更有许多小吃不可错过。",imagearray:["http://upp.tujiamedia.com/xitang/10.jpg"+t,"http://upp.tujiamedia.com/xitang/11.jpg"+t,"http://upp.tujiamedia.com/xitang/12.jpg"+t,"http://upp.tujiamedia.com/xitang/13.jpg"+t]}],n={data:e};return this.dataModel=function(){return n},n},renderHtml:function(t){var e=this,n=o(a,t);c.html(n),r=$(".J_piclist"),e.addEvent()},addEvent:function(){var t=this,e="",n=0,i=0,o=(s.width(),function(t){t.stopPropagation()}),a=function(e){e.stopPropagation(),p[0].classList.remove("animatable"),s.addClass("nomalswaper");var o=t.touchEvent(i,n);u.off("touchstart").on("touchstart",o.touchstart),u.off("touchmove").on("touchmove",o.touchmove),u.off("touchend").on("touchend",o.touchend)};s[0].addEventListener("transitionend",o,!1);var c=!1;r.on("touchstart",".pic-item",function(t){c=!0}),r.on("touchmove",".pic-item",function(t){c=!1}),r.on("touchend",".pic-item",function(t){if(c===!0){var o=$(this);n=o.index(),i=o.parent(".J_piclist").children().size(),e=o.parent(".J_piclist").html(),s.html(e).css("width",16*i+"rem"),s[0].style.webkitTransform="translateX("+-n*l+"px)",p[0].classList.add("animatable"),p[0].classList.add("visible"),p[0].addEventListener("transitionend",a,!1)}});var f=function(){p[0].removeEventListener("transitionend",a,!1),p[0].classList.remove("visible"),s.removeClass("nomalswaper")},g=!1;p.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),g=!0}),p.on("touchmove",function(t){t.preventDefault(),t.stopPropagation(),g=!1}),p.on("touchend",function(t){t.preventDefault(),t.stopPropagation(),1==g&&f()});var d=function(){var t="",e="http://a.app.qq.com/o/simple.jsp?pkgname=com.tujiaapp.tujia",n="https://itunes.apple.com/app/id1076081346";isWeixin?t=e:isAndroid?t=e:isIOS?t=n:console.log("You have lost your way,boy!");var i=$("#J_download");i.length||$("body").append('<a target="_blank" id="J_download" href="'+t+'" style=" display:none;cursor:pointer;">直接下载</a>'),$("#J_download").trigger("click")};$(".J_goapp").off().on("click",function(){var t=$(this),e=t.data("id");isAndroid?inTujia?scope.atlas(Number(e)):d():isIOS?inTujia?window.location.href="tujiaapp:id="+e:d():console.log("数据异常")}),$(".J_home").on("click",function(){inTujia&&(isAndroid?scope.goHome():window.location.href="tujiaapp:gohome")})},touchEvent:function(t,e){var t=t>0?t-1:0,n=!1,i=0,o=0,r=0,a=0;return{touchstart:function(t){t.preventDefault(),n=!0;var e=t.touches[0];i=e.pageX,r=e.pageY},touchmove:function(p){p.preventDefault();var c=p.touches[0];if(o=c.pageX,a=c.pageY,n&&Math.abs(r-a)<30&&Math.abs(o-i)>30&&(n=!1,e>=0&&t>=e)){if(o-i>0&&e>=0){if(0===e)return s[0].style.webkitTransform="translateX("+.382*l+"px)",void setTimeout(function(){s[0].style.webkitTransform="translateX(0px)"},200);e--}else if(0>o-i&&t>=e){if(e===t)return s[0].style.webkitTransform="translateX("+-((.382+e)*l)+"px)",void setTimeout(function(){s[0].style.webkitTransform="translateX("+-(t*l)+"px)"},200);e++}s[0].style.webkitTransform="translateX("+-e*l+"px)"}},touchend:function(i){i.preventDefault(),n=!1,setTimeout(function(){0===e&&(s[0].style.webkitTransform="translateX(0px)"),e===t&&(s[0].style.webkitTransform="translateX("+-(t*l)+"px)")},202)}}}};f.init()},{"../../../../unit/libs/lib-backtop/1.0.0/backtop":2,"../../../../unit/libs/lib-template/1.0.0/template":3}],2:[function(t,e,n){e.exports=function(t){var t=t||2*window.innerHeight+100,e=".backtop",n=$(window),i=$('<a href="javascript:;" class="backtop"></a>'),o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAkBAMAAADx8p7SAAAAKlBMVEUAAAD+/v7//f7//f7+/f3//////v///////v///////v///P3//v7///8rNLtqAAAADXRSTlMA/NocCb9OcbXoz4VlIaFugwAAAIlJREFUKM/tyrENg1AMRVFLKdKmSpcR0mSCDJEBskikjMAQtEi0bEAJBaLyLoDvt54EK/Aq++pY2eVZ224vn95cQu6fPfLChEYvTOjuM0zo68MvmJD5cA0mtCYLJrQlWKJIsEQkGIgUTIgEA5FgIFKyZkMk2N8CkWCV9aBM/ErsTIf0uB1S1+a1AEa7aZ7PHZ7sAAAAAElFTkSuQmCC";i.css({display:"none",position:"fixed",width:"1.6rem",height:"1.6rem",right:"0.67rem","border-radius":"50%",bottom:"2.9rem","z-index":"0",background:"rgba(0, 0, 0, 0.4) url("+o+") no-repeat center","background-size":"40% 40%"}),$("body").append(i),n.on("scroll",function(){n.scrollTop()<t?i.css("display","none"):i.css("display","block")}),$(document).on("click",e,function(){n.scrollTop(0),i.css("display","none")})}},{}],3:[function(t,e,n){(function(t){var n=function(){var t=[].slice.call(arguments);return t.push(n.options),t[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&t[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(e,n){var i=document,o=i&&i.getElementById(n);t[0]=o?o.value||o.innerHTML:e}),1==arguments.length?n.compile.apply(n,t):arguments.length>=2?n.to_html.apply(n,t):void 0},i={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(t){return i.escapehash[t]},escaping:function(t){return"string"!=typeof t?t:t.replace(/[&<>"]/gim,this.escapereplace)},detection:function(t){return"undefined"==typeof t?"":t}},o=function(t){if("undefined"!=typeof console){if(console.warn)return void console.warn(t);if(console.log)return void console.log(t)}throw t},r=function(t,e){if(t=t!==Object(t)?{}:t,t.__proto__)return t.__proto__=e,t;var n=function(){},i=Object.create?Object.create(e):new(n.prototype=e,n);for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);return i};n.__cache={},n.version="0.6.5-stable",n.settings={},n.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},n.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:r({__escapehtml:i,__throw:o,__juicer:n},{})},n.tagInit=function(){var t=n.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+n.tags.operationClose,e=n.tags.operationOpen+"\\/each"+n.tags.operationClose,i=n.tags.operationOpen+"if\\s*([^}]*?)"+n.tags.operationClose,o=n.tags.operationOpen+"\\/if"+n.tags.operationClose,r=n.tags.operationOpen+"else"+n.tags.operationClose,a=n.tags.operationOpen+"else if\\s*([^}]*?)"+n.tags.operationClose,s=n.tags.interpolateOpen+"([\\s\\S]+?)"+n.tags.interpolateClose,p=n.tags.noneencodeOpen+"([\\s\\S]+?)"+n.tags.noneencodeClose,c=n.tags.commentOpen+"[^}]*?"+n.tags.commentClose,u=n.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+n.tags.operationClose,l=n.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+n.tags.operationClose;n.settings.forstart=new RegExp(t,"igm"),n.settings.forend=new RegExp(e,"igm"),n.settings.ifstart=new RegExp(i,"igm"),n.settings.ifend=new RegExp(o,"igm"),n.settings.elsestart=new RegExp(r,"igm"),n.settings.elseifstart=new RegExp(a,"igm"),n.settings.interpolate=new RegExp(s,"igm"),n.settings.noneencode=new RegExp(p,"igm"),n.settings.inlinecomment=new RegExp(c,"igm"),n.settings.rangestart=new RegExp(u,"igm"),n.settings.include=new RegExp(l,"igm")},n.tagInit(),n.set=function(t,e){var n=this,i=function(t){return t.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(t){return"\\"+t})},o=function(t,e){var o=t.match(/^tag::(.*)$/i);return o?(n.tags[o[1]]=i(e),void n.tagInit()):void(n.options[t]=e)};if(2===arguments.length)return void o(t,e);if(t===Object(t))for(var r in t)t.hasOwnProperty(r)&&o(r,t[r])},n.register=function(t,e){var n=this.options._method;return n.hasOwnProperty(t)?!1:n[t]=e},n.unregister=function(t){var e=this.options._method;return e.hasOwnProperty(t)?delete e[t]:void 0},n.template=function(e){var i=this;this.options=e,this.__interpolate=function(t,e,n){var i,o=t.split("|"),r=o[0]||"";return o.length>1&&(t=o.shift(),i=o.shift().split(","),r="_method."+i.shift()+".call({}, "+[t].concat(i)+")"),"<%= "+(e?"_method.__escapehtml.escaping":"")+"("+(n&&n.detection===!1?"":"_method.__escapehtml.detection")+"("+r+")) %>"},this.__removeShell=function(t,e){var o=0;return t=t.replace(n.settings.forstart,function(t,e,n,i){var n=n||"value",i=i&&i.substr(1),r="i"+o++;return"<% ~function() {for(var "+r+" in "+e+") {if("+e+".hasOwnProperty("+r+")) {var "+n+"="+e+"["+r+"];"+(i?"var "+i+"="+r+";":"")+" %>"}).replace(n.settings.forend,"<% }}}(); %>").replace(n.settings.ifstart,function(t,e){return"<% if("+e+") { %>"}).replace(n.settings.ifend,"<% } %>").replace(n.settings.elsestart,function(t){return"<% } else { %>"}).replace(n.settings.elseifstart,function(t,e){return"<% } else if("+e+") { %>"}).replace(n.settings.noneencode,function(t,n){return i.__interpolate(n,!1,e)}).replace(n.settings.interpolate,function(t,n){return i.__interpolate(n,!0,e)}).replace(n.settings.inlinecomment,"").replace(n.settings.rangestart,function(t,e,n,i){var r="j"+o++;return"<% ~function() {for(var "+r+"="+n+";"+r+"<"+i+";"+r+"++) {{var "+e+"="+r+"; %>"}).replace(n.settings.include,function(t,e,n){return"<%= _method.__juicer("+e+", "+n+"); %>"}),e&&e.errorhandling===!1||(t="<% try { %>"+t,t+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),t},this.__toNative=function(t,e){return this.__convert(t,!e||e.strip)},this.__lexicalAnalyze=function(e){var i=[],o=[],r="",a=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],s=function(t,e){if(Array.prototype.indexOf&&t.indexOf===Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},p=function(e,r){if(r=r.match(/\w+/gim)[0],-1===s(i,r)&&-1===s(a,r)&&-1===s(o,r)){if("undefined"!=typeof window&&"function"==typeof window[r]&&window[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("undefined"!=typeof t&&"function"==typeof t[r]&&t[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("function"==typeof n.options._method[r]||n.options._method.hasOwnProperty(r))return o.push(r),e;i.push(r)}return e};e.replace(n.settings.forstart,p).replace(n.settings.interpolate,p).replace(n.settings.ifstart,p).replace(n.settings.elseifstart,p).replace(n.settings.include,p).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,p);for(var c=0;c<i.length;c++)r+="var "+i[c]+"=_."+i[c]+";";for(var c=0;c<o.length;c++)r+="var "+o[c]+"=_method."+o[c]+";";return"<% "+r+" %>"},this.__convert=function(t,e){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=e!==!1?t.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":t.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(t,e){var n=this;return e&&e.loose===!1||(t=this.__lexicalAnalyze(t)+t),t=this.__removeShell(t,e),t=this.__toNative(t,e),this._render=new Function("_, _method",t),this.render=function(t,e){return e&&e===i.options._method||(e=r(e,i.options._method)),n._render.call(this,t,e)},this}},n.compile=function(t,e){e&&e===this.options||(e=r(e,this.options));try{var n=this.__cache[t]?this.__cache[t]:new this.template(this.options).parse(t,e);return e&&e.cache===!1||(this.__cache[t]=n),n}catch(i){return o("Juicer Compile Exception: "+i.message),{render:function(){}}}},n.to_html=function(t,e,n){return n&&n===this.options||(n=r(n,this.options)),this.compile(t,n).render(e,n._method)},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);